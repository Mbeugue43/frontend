{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mbeug\\\\OneDrive\\\\Desktop\\\\GOVAIMED1\\\\frontend\\\\govaimed_frontend\\\\src\\\\pages\\\\admin\\\\Journal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api, { deleteData } from '../../api/endpoint'; // ✅ CORRIGÉ\nimport { FiFileText, FiSearch, FiTrash2, FiEye } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Journal = () => {\n  _s();\n  const [journalEntries, setJournalEntries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedEntry, setSelectedEntry] = useState(null);\n  const [filterType, setFilterType] = useState('ALL');\n  const [filterRole, setFilterRole] = useState('ALL');\n  useEffect(() => {\n    loadJournal();\n  }, []);\n  const loadJournal = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await api.getData('/journal'); // ✅ CORRIGÉ\n      setJournalEntries(Array.isArray(data) ? data : []);\n    } catch (err) {\n      console.error('Erreur chargement journal:', err);\n      setError(err.message || 'Impossible de charger le journal.');\n      setJournalEntries([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleView = entry => {\n    setSelectedEntry(entry);\n    setShowModal(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm('Êtes-vous sûr de vouloir supprimer cette entrée ?')) return;\n    try {\n      await deleteData(`/journal/${id}`); // ✅ ENDPOINT STANDARD\n      loadJournal();\n    } catch (err) {\n      alert(err.message || 'Erreur lors de la suppression');\n    }\n  };\n\n  // ✅ FONCTIONS IDENTIQUES (excellentes)\n  const getResourceTypeColor = type => {\n    switch (type) {\n      case 'DOSSIER_MEDICAL':\n        return 'bg-blue-100 text-blue-800';\n      case 'CONSULTATION':\n        return 'bg-green-100 text-green-800';\n      case 'ORDONNANCE':\n        return 'bg-purple-100 text-purple-800';\n      case 'RENDEZ_VOUS':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'UTILISATEUR':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n  const getRoleColor = role => {\n    switch (role) {\n      case 'Admin':\n        return 'bg-red-100 text-red-800';\n      case 'Medecin':\n        return 'bg-green-100 text-green-800';\n      case 'Patient':\n        return 'bg-blue-100 text-blue-800';\n      case 'Pharmacien':\n        return 'bg-orange-100 text-orange-800';\n      case 'Assistant':\n        return 'bg-purple-100 text-purple-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n  const filteredEntries = journalEntries.filter(entry => {\n    var _entry$action, _entry$userId, _entry$userId$fullNam, _entry$userId2, _entry$userId2$email;\n    const matchesSearch = ((_entry$action = entry.action) === null || _entry$action === void 0 ? void 0 : _entry$action.toLowerCase().includes(searchTerm.toLowerCase())) || ((_entry$userId = entry.userId) === null || _entry$userId === void 0 ? void 0 : (_entry$userId$fullNam = _entry$userId.fullName) === null || _entry$userId$fullNam === void 0 ? void 0 : _entry$userId$fullNam.toLowerCase().includes(searchTerm.toLowerCase())) || ((_entry$userId2 = entry.userId) === null || _entry$userId2 === void 0 ? void 0 : (_entry$userId2$email = _entry$userId2.email) === null || _entry$userId2$email === void 0 ? void 0 : _entry$userId2$email.toLowerCase().includes(searchTerm.toLowerCase()));\n    const matchesType = filterType === 'ALL' || entry.resourceType === filterType;\n    const matchesRole = filterRole === 'ALL' || entry.role === filterRole;\n    return matchesSearch && matchesType && matchesRole;\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Chargement...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 67\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this);\n  }\n\n  // ✅ JSX IDENTIQUE (PARFAIT)\n  // ✅ TEMPLATE CORRIGÉ POUR CHAQUE PAGE\n  const NomPage = () => {\n    // ... VOS useState() + useEffect() ✅\n\n    if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64 p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-lg\",\n        children: \"Chargement...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 82\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 23\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-gray-900\",\n          children: \"Votre Titre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mt-2\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }, this);\n  };\n};\n_s(Journal, \"3CfbLfUn4QiXqKlHaXdMbVy4fCA=\");\n_c = Journal;\nexport default Journal;\nvar _c;\n$RefreshReg$(_c, \"Journal\");","map":{"version":3,"names":["React","useState","useEffect","api","deleteData","FiFileText","FiSearch","FiTrash2","FiEye","jsxDEV","_jsxDEV","Journal","_s","journalEntries","setJournalEntries","loading","setLoading","error","setError","searchTerm","setSearchTerm","showModal","setShowModal","selectedEntry","setSelectedEntry","filterType","setFilterType","filterRole","setFilterRole","loadJournal","data","getData","Array","isArray","err","console","message","handleView","entry","handleDelete","id","window","confirm","alert","getResourceTypeColor","type","getRoleColor","role","filteredEntries","filter","_entry$action","_entry$userId","_entry$userId$fullNam","_entry$userId2","_entry$userId2$email","matchesSearch","action","toLowerCase","includes","userId","fullName","email","matchesType","resourceType","matchesRole","className","children","fileName","_jsxFileName","lineNumber","columnNumber","NomPage","_c","$RefreshReg$"],"sources":["C:/Users/mbeug/OneDrive/Desktop/GOVAIMED1/frontend/govaimed_frontend/src/pages/admin/Journal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api, { deleteData } from '../../api/endpoint'; // ✅ CORRIGÉ\r\nimport { FiFileText, FiSearch, FiTrash2, FiEye } from 'react-icons/fi';\r\n\r\nconst Journal = () => {\r\n  const [journalEntries, setJournalEntries] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [selectedEntry, setSelectedEntry] = useState(null);\r\n  const [filterType, setFilterType] = useState('ALL');\r\n  const [filterRole, setFilterRole] = useState('ALL');\r\n\r\n  useEffect(() => {\r\n    loadJournal();\r\n  }, []);\r\n\r\n  const loadJournal = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await api.getData('/journal'); // ✅ CORRIGÉ\r\n      setJournalEntries(Array.isArray(data) ? data : []);\r\n    } catch (err) {\r\n      console.error('Erreur chargement journal:', err);\r\n      setError(err.message || 'Impossible de charger le journal.');\r\n      setJournalEntries([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleView = (entry) => {\r\n    setSelectedEntry(entry);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Êtes-vous sûr de vouloir supprimer cette entrée ?')) return;\r\n    try {\r\n      await deleteData(`/journal/${id}`); // ✅ ENDPOINT STANDARD\r\n      loadJournal();\r\n    } catch (err) {\r\n      alert(err.message || 'Erreur lors de la suppression');\r\n    }\r\n  };\r\n\r\n  // ✅ FONCTIONS IDENTIQUES (excellentes)\r\n  const getResourceTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'DOSSIER_MEDICAL': return 'bg-blue-100 text-blue-800';\r\n      case 'CONSULTATION': return 'bg-green-100 text-green-800';\r\n      case 'ORDONNANCE': return 'bg-purple-100 text-purple-800';\r\n      case 'RENDEZ_VOUS': return 'bg-yellow-100 text-yellow-800';\r\n      case 'UTILISATEUR': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getRoleColor = (role) => {\r\n    switch (role) {\r\n      case 'Admin': return 'bg-red-100 text-red-800';\r\n      case 'Medecin': return 'bg-green-100 text-green-800';\r\n      case 'Patient': return 'bg-blue-100 text-blue-800';\r\n      case 'Pharmacien': return 'bg-orange-100 text-orange-800';\r\n      case 'Assistant': return 'bg-purple-100 text-purple-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const filteredEntries = journalEntries.filter(entry => {\r\n    const matchesSearch = \r\n      entry.action?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      entry.userId?.fullName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      entry.userId?.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesType = filterType === 'ALL' || entry.resourceType === filterType;\r\n    const matchesRole = filterRole === 'ALL' || entry.role === filterRole;\r\n    \r\n    return matchesSearch && matchesType && matchesRole;\r\n  });\r\n\r\n  if (loading) {\r\n    return <div className=\"flex items-center justify-center h-64\"><div>Chargement...</div></div>;\r\n  }\r\n\r\n  // ✅ JSX IDENTIQUE (PARFAIT)\r\n  // ✅ TEMPLATE CORRIGÉ POUR CHAQUE PAGE\r\nconst NomPage = () => {\r\n  // ... VOS useState() + useEffect() ✅\r\n\r\n  if (loading) return <div className=\"flex items-center justify-center h-64 p-6\"><div className=\"text-lg\">Chargement...</div></div>;\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-7xl mx-auto\">\r\n      {/* VOTRE TITRE */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">Votre Titre</h1>\r\n        <p className=\"text-gray-600 mt-2\">Description</p>\r\n      </div>\r\n\r\n      {/* VOTRE TABLEAU / FORMULAIRE */}\r\n      <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\r\n        {/* CONTENU */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n};\r\n\r\nexport default Journal;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,GAAG,IAAIC,UAAU,QAAQ,oBAAoB,CAAC,CAAC;AACtD,SAASC,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACoB,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACsB,aAAa,EAAEC,gBAAgB,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACwB,UAAU,EAAEC,aAAa,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC0B,UAAU,EAAEC,aAAa,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAEnDC,SAAS,CAAC,MAAM;IACd2B,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFb,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MACd,MAAMY,IAAI,GAAG,MAAM3B,GAAG,CAAC4B,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;MAC5CjB,iBAAiB,CAACkB,KAAK,CAACC,OAAO,CAACH,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;IACpD,CAAC,CAAC,OAAOI,GAAG,EAAE;MACZC,OAAO,CAAClB,KAAK,CAAC,4BAA4B,EAAEiB,GAAG,CAAC;MAChDhB,QAAQ,CAACgB,GAAG,CAACE,OAAO,IAAI,mCAAmC,CAAC;MAC5DtB,iBAAiB,CAAC,EAAE,CAAC;IACvB,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMqB,UAAU,GAAIC,KAAK,IAAK;IAC5Bd,gBAAgB,CAACc,KAAK,CAAC;IACvBhB,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAMiB,YAAY,GAAG,MAAOC,EAAE,IAAK;IACjC,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,mDAAmD,CAAC,EAAE;IAC1E,IAAI;MACF,MAAMtC,UAAU,CAAC,YAAYoC,EAAE,EAAE,CAAC,CAAC,CAAC;MACpCX,WAAW,CAAC,CAAC;IACf,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZS,KAAK,CAACT,GAAG,CAACE,OAAO,IAAI,+BAA+B,CAAC;IACvD;EACF,CAAC;;EAED;EACA,MAAMQ,oBAAoB,GAAIC,IAAI,IAAK;IACrC,QAAQA,IAAI;MACV,KAAK,iBAAiB;QAAE,OAAO,2BAA2B;MAC1D,KAAK,cAAc;QAAE,OAAO,6BAA6B;MACzD,KAAK,YAAY;QAAE,OAAO,+BAA+B;MACzD,KAAK,aAAa;QAAE,OAAO,+BAA+B;MAC1D,KAAK,aAAa;QAAE,OAAO,yBAAyB;MACpD;QAAS,OAAO,2BAA2B;IAC7C;EACF,CAAC;EAED,MAAMC,YAAY,GAAIC,IAAI,IAAK;IAC7B,QAAQA,IAAI;MACV,KAAK,OAAO;QAAE,OAAO,yBAAyB;MAC9C,KAAK,SAAS;QAAE,OAAO,6BAA6B;MACpD,KAAK,SAAS;QAAE,OAAO,2BAA2B;MAClD,KAAK,YAAY;QAAE,OAAO,+BAA+B;MACzD,KAAK,WAAW;QAAE,OAAO,+BAA+B;MACxD;QAAS,OAAO,2BAA2B;IAC7C;EACF,CAAC;EAED,MAAMC,eAAe,GAAGnC,cAAc,CAACoC,MAAM,CAACX,KAAK,IAAI;IAAA,IAAAY,aAAA,EAAAC,aAAA,EAAAC,qBAAA,EAAAC,cAAA,EAAAC,oBAAA;IACrD,MAAMC,aAAa,GACjB,EAAAL,aAAA,GAAAZ,KAAK,CAACkB,MAAM,cAAAN,aAAA,uBAAZA,aAAA,CAAcO,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvC,UAAU,CAACsC,WAAW,CAAC,CAAC,CAAC,OAAAN,aAAA,GAC9Db,KAAK,CAACqB,MAAM,cAAAR,aAAA,wBAAAC,qBAAA,GAAZD,aAAA,CAAcS,QAAQ,cAAAR,qBAAA,uBAAtBA,qBAAA,CAAwBK,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvC,UAAU,CAACsC,WAAW,CAAC,CAAC,CAAC,OAAAJ,cAAA,GACxEf,KAAK,CAACqB,MAAM,cAAAN,cAAA,wBAAAC,oBAAA,GAAZD,cAAA,CAAcQ,KAAK,cAAAP,oBAAA,uBAAnBA,oBAAA,CAAqBG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvC,UAAU,CAACsC,WAAW,CAAC,CAAC,CAAC;IAEvE,MAAMK,WAAW,GAAGrC,UAAU,KAAK,KAAK,IAAIa,KAAK,CAACyB,YAAY,KAAKtC,UAAU;IAC7E,MAAMuC,WAAW,GAAGrC,UAAU,KAAK,KAAK,IAAIW,KAAK,CAACS,IAAI,KAAKpB,UAAU;IAErE,OAAO4B,aAAa,IAAIO,WAAW,IAAIE,WAAW;EACpD,CAAC,CAAC;EAEF,IAAIjD,OAAO,EAAE;IACX,oBAAOL,OAAA;MAAKuD,SAAS,EAAC,uCAAuC;MAAAC,QAAA,eAACxD,OAAA;QAAAwD,QAAA,EAAK;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9F;;EAEA;EACA;EACF,MAAMC,OAAO,GAAGA,CAAA,KAAM;IACpB;;IAEA,IAAIxD,OAAO,EAAE,oBAAOL,OAAA;MAAKuD,SAAS,EAAC,2CAA2C;MAAAC,QAAA,eAACxD,OAAA;QAAKuD,SAAS,EAAC,SAAS;QAAAC,QAAA,EAAC;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;IAEjI,oBACE5D,OAAA;MAAKuD,SAAS,EAAC,uBAAuB;MAAAC,QAAA,gBAEpCxD,OAAA;QAAKuD,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACnBxD,OAAA;UAAIuD,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjE5D,OAAA;UAAGuD,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C,CAAC,eAGN5D,OAAA;QAAKuD,SAAS,EAAC;MAAuE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEjF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV,CAAC;AAGD,CAAC;AAAC1D,EAAA,CA3GID,OAAO;AAAA6D,EAAA,GAAP7D,OAAO;AA6Gb,eAAeA,OAAO;AAAC,IAAA6D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}