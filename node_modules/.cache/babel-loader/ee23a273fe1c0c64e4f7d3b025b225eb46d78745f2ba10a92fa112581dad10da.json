{"ast":null,"code":"// import React, { createContext, useContext, useEffect, useState } from 'react';\n// import api from '../api/instance';\n\n// // Contexte d'authentification global\n// // Il permet de partager l'état de connexion (utilisateur, token)\n// // entre toutes les pages de l'application.\n// const AuthContext = createContext(null);\n\n// // Hook personnalisé pour consommer plus facilement le contexte\n// export const useAuth = () => useContext(AuthContext);\n\n// // Fournisseur du contexte d'authentification\n// export const AuthProvider = ({ children }) => {\n//   // état local qui stocke le token JWT et les infos utilisateur simples\n//   const [token, setToken] = useState(null);\n//   const [user, setUser] = useState(null);\n//   const [loading, setLoading] = useState(true);\n\n//   // Au chargement de l'application, on vérifie si un token existe déjà\n//   // dans le localStorage (utilisateur déjà connecté).\n//   useEffect(() => {\n//     const storedToken = localStorage.getItem('authToken');\n//     const storedUser = localStorage.getItem('authUser');\n\n//     if (storedToken && storedToken !== 'undefined') {\n//       setToken(storedToken);\n//       setUser(storedUser ? JSON.parse(storedUser) : null);\n//     }\n//     setLoading(false);\n//   }, []);\n\n//   // Fonction de connexion : envoie les identifiants au backend,\n//   // stocke le token et les infos utilisateur en cas de succès.\n//   const login = async ({ email, password }) => {\n//     const response = await api.post('/login', { email, password });\n\n//     const receivedToken = response.data.token;\n//     // On peut stocker des infos minimales sur l'utilisateur si nécessaire\n//     const basicUser = { email };\n\n//     localStorage.setItem('authToken', receivedToken);\n//     localStorage.setItem('authUser', JSON.stringify(basicUser));\n\n//     setToken(receivedToken);\n//     setUser(basicUser);\n\n//     return response.data;\n//   };\n\n//   // Fonction d'inscription : crée un compte côté backend.\n//   // En cas de succès, on peut directement connecter l'utilisateur\n//   // ou le rediriger vers la page de connexion (au choix).\n//   const register = async (payload) => {\n//     // payload doit contenir au minimum : fullName, email, password\n//     const response = await api.post('/register', payload);\n//     return response.data;\n//   };\n\n//   // Fonction de déconnexion : supprime les données d'authentification.\n//   const logout = () => {\n//     localStorage.removeItem('authToken');\n//     localStorage.removeItem('authUser');\n//     setToken(null);\n//     setUser(null);\n//   };\n\n//   // Valeurs partagées dans tout le projet via le contexte\n//   const value = {\n//     token,\n//     user,\n//     loading,\n//     isAuthenticated: !!token,\n//     login,\n//     register,\n//     logout,\n//   };\n\n//   return (\n//     <AuthContext.Provider value={value}>\n//       {children}\n//     </AuthContext.Provider>\n//   );\n// };","map":{"version":3,"names":[],"sources":["C:/Users/mbeug/OneDrive/Desktop/GOVAIMED1/frontend/govaimed_frontend/src/context/AuthContext.jsx"],"sourcesContent":["// import React, { createContext, useContext, useEffect, useState } from 'react';\r\n// import api from '../api/instance';\r\n\r\n// // Contexte d'authentification global\r\n// // Il permet de partager l'état de connexion (utilisateur, token)\r\n// // entre toutes les pages de l'application.\r\n// const AuthContext = createContext(null);\r\n\r\n// // Hook personnalisé pour consommer plus facilement le contexte\r\n// export const useAuth = () => useContext(AuthContext);\r\n\r\n// // Fournisseur du contexte d'authentification\r\n// export const AuthProvider = ({ children }) => {\r\n//   // état local qui stocke le token JWT et les infos utilisateur simples\r\n//   const [token, setToken] = useState(null);\r\n//   const [user, setUser] = useState(null);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   // Au chargement de l'application, on vérifie si un token existe déjà\r\n//   // dans le localStorage (utilisateur déjà connecté).\r\n//   useEffect(() => {\r\n//     const storedToken = localStorage.getItem('authToken');\r\n//     const storedUser = localStorage.getItem('authUser');\r\n\r\n//     if (storedToken && storedToken !== 'undefined') {\r\n//       setToken(storedToken);\r\n//       setUser(storedUser ? JSON.parse(storedUser) : null);\r\n//     }\r\n//     setLoading(false);\r\n//   }, []);\r\n\r\n//   // Fonction de connexion : envoie les identifiants au backend,\r\n//   // stocke le token et les infos utilisateur en cas de succès.\r\n//   const login = async ({ email, password }) => {\r\n//     const response = await api.post('/login', { email, password });\r\n\r\n//     const receivedToken = response.data.token;\r\n//     // On peut stocker des infos minimales sur l'utilisateur si nécessaire\r\n//     const basicUser = { email };\r\n\r\n//     localStorage.setItem('authToken', receivedToken);\r\n//     localStorage.setItem('authUser', JSON.stringify(basicUser));\r\n\r\n//     setToken(receivedToken);\r\n//     setUser(basicUser);\r\n\r\n//     return response.data;\r\n//   };\r\n\r\n//   // Fonction d'inscription : crée un compte côté backend.\r\n//   // En cas de succès, on peut directement connecter l'utilisateur\r\n//   // ou le rediriger vers la page de connexion (au choix).\r\n//   const register = async (payload) => {\r\n//     // payload doit contenir au minimum : fullName, email, password\r\n//     const response = await api.post('/register', payload);\r\n//     return response.data;\r\n//   };\r\n\r\n//   // Fonction de déconnexion : supprime les données d'authentification.\r\n//   const logout = () => {\r\n//     localStorage.removeItem('authToken');\r\n//     localStorage.removeItem('authUser');\r\n//     setToken(null);\r\n//     setUser(null);\r\n//   };\r\n\r\n//   // Valeurs partagées dans tout le projet via le contexte\r\n//   const value = {\r\n//     token,\r\n//     user,\r\n//     loading,\r\n//     isAuthenticated: !!token,\r\n//     login,\r\n//     register,\r\n//     logout,\r\n//   };\r\n\r\n//   return (\r\n//     <AuthContext.Provider value={value}>\r\n//       {children}\r\n//     </AuthContext.Provider>\r\n//   );\r\n// };\r\n\r\n\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}